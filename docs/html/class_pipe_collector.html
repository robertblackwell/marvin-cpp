<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MarvinCpp: PipeCollector Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MarvinCpp
   </div>
   <div id="projectbrief">Man in the middle proxy</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="class_pipe_collector-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">PipeCollector Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="pipe__collector_8hpp_source.html">pipe_collector.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad2a04b5f8e95e204cfe1d85bded0c92d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pipe_collector.html#ad2a04b5f8e95e204cfe1d85bded0c92d">PipeCollector</a> (<a class="el" href="class_pipe_collector.html">PipeCollector</a> const &amp;)=delete</td></tr>
<tr class="separator:ad2a04b5f8e95e204cfe1d85bded0c92d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae286d157a61dbef510e1903ad245e96e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pipe_collector.html#ae286d157a61dbef510e1903ad245e96e">operator=</a> (<a class="el" href="class_pipe_collector.html">PipeCollector</a> const &amp;)=delete</td></tr>
<tr class="separator:ae286d157a61dbef510e1903ad245e96e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4deab58d1636c9af54146df61f4d244c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pipe_collector.html#a4deab58d1636c9af54146df61f4d244c">collect</a> (std::string &amp;scheme, std::string &amp;host, <a class="el" href="message__reader_8hpp.html#a3ab91cc37d45e3e0bfa4f0ede26af041">MessageReaderSPtr</a> req, <a class="el" href="message__writer_8hpp.html#a1842b71e85a75bc5ede6dc8f0114e47c">MessageWriterSPtr</a> resp)</td></tr>
<tr class="separator:a4deab58d1636c9af54146df61f4d244c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ad5f10086bc650dc13a1b620c2c425edb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_pipe_collector.html">PipeCollector</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pipe_collector.html#ad5f10086bc650dc13a1b620c2c425edb">getInstance</a> (boost::asio::io_service &amp;io)</td></tr>
<tr class="separator:ad5f10086bc650dc13a1b620c2c425edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2b95b11b4910616abff4846fe291064"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pipe_collector.html#ab2b95b11b4910616abff4846fe291064">configSet_PipePath</a> (std::string path)</td></tr>
<tr class="separator:ab2b95b11b4910616abff4846fe291064"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ab599c19550e7b7d2534231c9e9d61375"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pipe_collector.html#ab599c19550e7b7d2534231c9e9d61375">_firstTime</a> = true</td></tr>
<tr class="separator:ab599c19550e7b7d2534231c9e9d61375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8c74d185ce54c2193ec8f42ef099698"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_pipe_collector.html">PipeCollector</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pipe_collector.html#af8c74d185ce54c2193ec8f42ef099698">_instance</a> = NULL</td></tr>
<tr class="separator:af8c74d185ce54c2193ec8f42ef099698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bbb1d5bd4d23738cc0e90e0a8644f55"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pipe_collector.html#a1bbb1d5bd4d23738cc0e90e0a8644f55">_pipePath</a> = &quot;&quot;</td></tr>
<tr class="separator:a1bbb1d5bd4d23738cc0e90e0a8644f55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class is a singleton that requires to be primed with the servers io_service object so that it (this class) can schedule callbacks. I chose to have the io_service passed in the getInstance static method, that way cannot forget</p>
<p>In addition it needs the path name of the pipe to which it will write. That should be set via the static method configSet_PipePath during the startup phase of the server.</p>
<p>This class also has a boost strand to protect against mutiple access to critical sections of code. BUT, this class also does synchronous stream IO which will delay whatever thread the strand is running on to prevent this delaying the entire proxy process the server should start an additional thread and connect it to the geneal io_service to aleviate this issue. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad2a04b5f8e95e204cfe1d85bded0c92d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a04b5f8e95e204cfe1d85bded0c92d">&#9670;&nbsp;</a></span>PipeCollector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PipeCollector::PipeCollector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_pipe_collector.html">PipeCollector</a> const &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Delete copy constructors </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4deab58d1636c9af54146df61f4d244c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4deab58d1636c9af54146df61f4d244c">&#9670;&nbsp;</a></span>collect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PipeCollector::collect </td>
          <td>(</td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>scheme</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="message__reader_8hpp.html#a3ab91cc37d45e3e0bfa4f0ede26af041">MessageReaderSPtr</a>&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="message__writer_8hpp.html#a1842b71e85a75bc5ede6dc8f0114e47c">MessageWriterSPtr</a>&#160;</td>
          <td class="paramname"><em>resp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Interface method for client code to call collect </p>
<p>In here implement the creation the summary records but dont do any IO or sending leave that for postedCollect</p>

</div>
</div>
<a id="ab2b95b11b4910616abff4846fe291064"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2b95b11b4910616abff4846fe291064">&#9670;&nbsp;</a></span>configSet_PipePath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PipeCollector::configSet_PipePath </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad5f10086bc650dc13a1b620c2c425edb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5f10086bc650dc13a1b620c2c425edb">&#9670;&nbsp;</a></span>getInstance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_pipe_collector.html">PipeCollector</a> * PipeCollector::getInstance </td>
          <td>(</td>
          <td class="paramtype">boost::asio::io_service &amp;&#160;</td>
          <td class="paramname"><em>io</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae286d157a61dbef510e1903ad245e96e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae286d157a61dbef510e1903ad245e96e">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PipeCollector::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_pipe_collector.html">PipeCollector</a> const &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab599c19550e7b7d2534231c9e9d61375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab599c19550e7b7d2534231c9e9d61375">&#9670;&nbsp;</a></span>_firstTime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool PipeCollector::_firstTime = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af8c74d185ce54c2193ec8f42ef099698"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8c74d185ce54c2193ec8f42ef099698">&#9670;&nbsp;</a></span>_instance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_pipe_collector.html">PipeCollector</a> * PipeCollector::_instance = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1bbb1d5bd4d23738cc0e90e0a8644f55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bbb1d5bd4d23738cc0e90e0a8644f55">&#9670;&nbsp;</a></span>_pipePath</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string PipeCollector::_pipePath = &quot;&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>marvin/collector/<a class="el" href="pipe__collector_8hpp_source.html">pipe_collector.hpp</a></li>
<li>marvin/collector/<a class="el" href="pipe__collector_8cpp.html">pipe_collector.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
