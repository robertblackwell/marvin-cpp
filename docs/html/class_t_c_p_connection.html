<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MarvinCpp: TCPConnection Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MarvinCpp
   </div>
   <div id="projectbrief">Man in the middle proxy</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="class_t_c_p_connection-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TCPConnection Class Reference<div class="ingroups"><a class="el" href="group___socket_i_o.html">SocketIO</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Wraps a boost::asio tcp socket and provides non TLS/SSL application specific async operations as specified in <a class="el" href="class_i_socket.html" title="Interface defines all the methods read, write, connect, accept, shutdown, close common to tcp and ssl...">ISocket</a>; in addition implements timeout on all except asyncAccept operations.  
 <a href="class_t_c_p_connection.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="tcp__connection_8hpp_source.html">tcp_connection.hpp</a>&gt;</code></p>

<p>Inherits <a class="el" href="class_i_socket.html">ISocket</a>.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1786a9f9ea84d1e504dee290d0425ce8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a1786a9f9ea84d1e504dee290d0425ce8">TCPConnection</a> (boost::asio::io_service &amp;io_service, const std::string <a class="el" href="class_t_c_p_connection.html#ac270233abe1610585bcaa86e654cf6ad">scheme</a>, const std::string <a class="el" href="class_t_c_p_connection.html#a3dc68d736ab41b8550696f1bdedaf40a">server</a>, const std::string port)</td></tr>
<tr class="separator:a1786a9f9ea84d1e504dee290d0425ce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af66a3430e661be59609f5cdbd2f19317"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#af66a3430e661be59609f5cdbd2f19317">TCPConnection</a> (boost::asio::io_service &amp;io_service)</td></tr>
<tr class="separator:af66a3430e661be59609f5cdbd2f19317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b79ac9c31e99766954c9cca733a362d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a0b79ac9c31e99766954c9cca733a362d">~TCPConnection</a> ()</td></tr>
<tr class="separator:a0b79ac9c31e99766954c9cca733a362d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4984a896404d02c9dc1135e788a71a4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a4984a896404d02c9dc1135e788a71a4d">asyncConnect</a> (<a class="el" href="callback__typedefs_8hpp.html#a049e2c9f952140004e0e04abf3e95260">ConnectCallbackType</a> cb)</td></tr>
<tr class="separator:a4984a896404d02c9dc1135e788a71a4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab49c7b4120490daec460c9b0bd06dfbd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#ab49c7b4120490daec460c9b0bd06dfbd">asyncAccept</a> (boost::asio::ip::tcp::acceptor &amp;acceptor, std::function&lt; void(const boost::system::error_code &amp;err)&gt; cb)</td></tr>
<tr class="separator:ab49c7b4120490daec460c9b0bd06dfbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43f5822629686772725846837f935b88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a43f5822629686772725846837f935b88">asyncWrite</a> (<a class="el" href="struct_marvin_1_1_m_buffer.html">Marvin::MBuffer</a> &amp;buffer, <a class="el" href="callback__typedefs_8hpp.html#a4d959ed21cf4d737096ab4e25036b67b">AsyncWriteCallbackType</a> cb)</td></tr>
<tr class="separator:a43f5822629686772725846837f935b88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39f657137386c99671e5b0bb660ac1ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a39f657137386c99671e5b0bb660ac1ef">asyncWrite</a> (std::string &amp;str, <a class="el" href="callback__typedefs_8hpp.html#a4d959ed21cf4d737096ab4e25036b67b">AsyncWriteCallbackType</a> cb)</td></tr>
<tr class="separator:a39f657137386c99671e5b0bb660ac1ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80ea97827f3b75bbcdaf57a48c100fe4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a80ea97827f3b75bbcdaf57a48c100fe4">asyncWrite</a> (<a class="el" href="group___buffer.html#ga61df81a686ace7e9b683a9d7bda76865">Marvin::BufferChainSPtr</a> buf_chain_sptr, <a class="el" href="group___socket_i_o.html#ga38bc94591fd3214bc11f4d65300606a0">AsyncWriteCallback</a> cb)</td></tr>
<tr class="separator:a80ea97827f3b75bbcdaf57a48c100fe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99e5f8c52d41a365cb8a99cdf7b2e96d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a99e5f8c52d41a365cb8a99cdf7b2e96d">asyncWrite</a> (boost::asio::const_buffer buf, <a class="el" href="group___socket_i_o.html#ga38bc94591fd3214bc11f4d65300606a0">AsyncWriteCallback</a> cb)</td></tr>
<tr class="separator:a99e5f8c52d41a365cb8a99cdf7b2e96d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bd787d3f088dcea9d48b993fa043a1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a2bd787d3f088dcea9d48b993fa043a1c">asyncWrite</a> (boost::asio::streambuf &amp;sb, <a class="el" href="group___socket_i_o.html#ga38bc94591fd3214bc11f4d65300606a0">AsyncWriteCallback</a>)</td></tr>
<tr class="separator:a2bd787d3f088dcea9d48b993fa043a1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a270208cc3dd85f0ce4be7ef720a8927a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a270208cc3dd85f0ce4be7ef720a8927a">asyncRead</a> (<a class="el" href="struct_marvin_1_1_m_buffer.html">Marvin::MBuffer</a> &amp;mb, <a class="el" href="callback__typedefs_8hpp.html#aefc3c66bca9018a8a24ae732074b8065">AsyncReadCallbackType</a> cb)</td></tr>
<tr class="separator:a270208cc3dd85f0ce4be7ef720a8927a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdd912efe436e41d99a60ef1bb16ec73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#afdd912efe436e41d99a60ef1bb16ec73">shutdown</a> ()</td></tr>
<tr class="separator:afdd912efe436e41d99a60ef1bb16ec73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9d37f9ec45ee1c1bfb4164aed8b7135"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#ab9d37f9ec45ee1c1bfb4164aed8b7135">close</a> ()</td></tr>
<tr class="separator:ab9d37f9ec45ee1c1bfb4164aed8b7135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76fd32d49d1875e8e4a0f9f503a92bcd"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a76fd32d49d1875e8e4a0f9f503a92bcd">nativeSocketFD</a> ()</td></tr>
<tr class="separator:a76fd32d49d1875e8e4a0f9f503a92bcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac270233abe1610585bcaa86e654cf6ad"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#ac270233abe1610585bcaa86e654cf6ad">scheme</a> ()</td></tr>
<tr class="separator:ac270233abe1610585bcaa86e654cf6ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dc68d736ab41b8550696f1bdedaf40a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a3dc68d736ab41b8550696f1bdedaf40a">server</a> ()</td></tr>
<tr class="separator:a3dc68d736ab41b8550696f1bdedaf40a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8ed90aa1225fe1f534e736a438ac8bd"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#ac8ed90aa1225fe1f534e736a438ac8bd">service</a> ()</td></tr>
<tr class="separator:ac8ed90aa1225fe1f534e736a438ac8bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a55d72a606e2ec9be8e145606001c9790"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a55d72a606e2ec9be8e145606001c9790">setConfig_connectTimeOut</a> (long millisecs)</td></tr>
<tr class="separator:a55d72a606e2ec9be8e145606001c9790"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbf6e8d1866906ce7b1a269c0df35f20"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#acbf6e8d1866906ce7b1a269c0df35f20">setConfig_readTimeOut</a> (long millisecs)</td></tr>
<tr class="separator:acbf6e8d1866906ce7b1a269c0df35f20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a53971c6eeadf5dd1be0aa45b654694"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a1a53971c6eeadf5dd1be0aa45b654694">setConfig_writeTimeOut</a> (long millisecs)</td></tr>
<tr class="separator:a1a53971c6eeadf5dd1be0aa45b654694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22bdfdfecfdf97f4b8024e28e2ed6eb0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a22bdfdfecfdf97f4b8024e28e2ed6eb0">fd_inuse</a> (int fd)</td></tr>
<tr class="separator:a22bdfdfecfdf97f4b8024e28e2ed6eb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0077ddd447c155402fa00348ec8635d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#ac0077ddd447c155402fa00348ec8635d">fd_free</a> (int fd)</td></tr>
<tr class="separator:ac0077ddd447c155402fa00348ec8635d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a3608b7c239e5f41bff96c507731b122c"><td class="memItemLeft" align="right" valign="top">static long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a3608b7c239e5f41bff96c507731b122c">s_connect_timeout_interval_ms</a> = 5000</td></tr>
<tr class="separator:a3608b7c239e5f41bff96c507731b122c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97f9d02f6a64d900b89da6246930b402"><td class="memItemLeft" align="right" valign="top">static long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a97f9d02f6a64d900b89da6246930b402">s_read_timeout_interval_ms</a> = 5000</td></tr>
<tr class="separator:a97f9d02f6a64d900b89da6246930b402"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdaad23edaa7a8075402761352169d92"><td class="memItemLeft" align="right" valign="top">static long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#acdaad23edaa7a8075402761352169d92">s_write_timeout_interval_ms</a> = 5000</td></tr>
<tr class="separator:acdaad23edaa7a8075402761352169d92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a257b53aea1460ce87ca0d5f269d1326f"><td class="memItemLeft" align="right" valign="top">static std::map&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_connection.html#a257b53aea1460ce87ca0d5f269d1326f">socket_fds_inuse</a></td></tr>
<tr class="separator:a257b53aea1460ce87ca0d5f269d1326f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_class_i_socket"><td colspan="2" onclick="javascript:toggleInherit('pub_types_class_i_socket')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="class_i_socket.html">ISocket</a></td></tr>
<tr class="memitem:a8f263afd23c7d001e4bb38febafbf384 inherit pub_types_class_i_socket"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_socket.html#a8f263afd23c7d001e4bb38febafbf384">SPtr</a> = std::shared_ptr&lt; <a class="el" href="class_i_socket.html">ISocket</a> &gt;</td></tr>
<tr class="separator:a8f263afd23c7d001e4bb38febafbf384 inherit pub_types_class_i_socket"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Wraps a boost::asio tcp socket and provides non TLS/SSL application specific async operations as specified in <a class="el" href="class_i_socket.html" title="Interface defines all the methods read, write, connect, accept, shutdown, close common to tcp and ssl...">ISocket</a>; in addition implements timeout on all except asyncAccept operations. </p>
<h2>Timeouts</h2>
<p>A Note on timeouts, the use of a boost::asio::strand by this class, and concurrent calls to the async io methods defined below.</p>
<ol type="1">
<li>Only one async I/O operation should be outstanding at any time.</li>
<li><p class="startli">Internally this class applies timeouts to the operations:</p><ul>
<li>asyncConnect</li>
<li>asyncRead</li>
<li>asyncWrite in all its forms to accomodate this an instance of boost::asio::strand is used to ensure that internal io handlers coordinate correctly and do not run concurrently.</li>
</ul>
<p class="startli">HOowever all callbacks provided to asyncConnect, asyncRead, asyncWrite are scheduled (using _io.post())on the instance of io_service being used by the <a class="el" href="class_t_c_p_connection.html" title="Wraps a boost::asio tcp socket and provides non TLS/SSL application specific async operations as spec...">TCPConnection</a> instance and ARE NOT running on the internal strand. These callbacks should NOT be wrapped by another strand as that could cause deadlocks.</p>
<p class="startli">Notice that asyncAccept was NOT included in the list of io ops subject to timeout. </p><pre class="fragment">-   asyncAccept is intended to be used by a server and could be outstanding for a very long time,
    and hence a timeout seems inappropriate, and nothing else should be happening on that
    socket while the saerver is waiting for a client connection.
</pre> <dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>consider taking accept out of this class<ul>
<li>because of no timeout there is no need for internal handlers associated with asyncAccept to be run on the internal asio::strand.</li>
<li>it is likely that asyncAccept callback will be wrapped by a strand within a server as part of a servers management of its own concurrency issues. </li>
</ul>
</dd></dl>
</li>
</ol>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1786a9f9ea84d1e504dee290d0425ce8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1786a9f9ea84d1e504dee290d0425ce8">&#9670;&nbsp;</a></span>TCPConnection() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TCPConnection::TCPConnection </td>
          <td>(</td>
          <td class="paramtype">boost::asio::io_service &amp;&#160;</td>
          <td class="paramname"><em>io_service</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>scheme</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>client socket needs to know who to connect to </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_service</td><td>io_service&amp; the runloop on which this connection will run </td></tr>
    <tr><td class="paramname">scheme</td><td>std::string - values are "http" or "https" </td></tr>
    <tr><td class="paramname">server</td><td>std::string - a name such as www.google.com, NOTE no port number on the end </td></tr>
    <tr><td class="paramname">port</td><td>std::string</td></tr>
  </table>
  </dd>
</dl>
<p>Constructor </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">{io_service}</td><td>io_service - to use for running </td></tr>
    <tr><td class="paramname">{string}</td><td>scheme - "http" or "https" </td></tr>
    <tr><td class="paramname">{string}</td><td>server - domain string </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af66a3430e661be59609f5cdbd2f19317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af66a3430e661be59609f5cdbd2f19317">&#9670;&nbsp;</a></span>TCPConnection() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TCPConnection::TCPConnection </td>
          <td>(</td>
          <td class="paramtype">boost::asio::io_service &amp;&#160;</td>
          <td class="paramname"><em>io_service</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>server socket will be connected via listen/accept </p>

</div>
</div>
<a id="a0b79ac9c31e99766954c9cca733a362d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b79ac9c31e99766954c9cca733a362d">&#9670;&nbsp;</a></span>~TCPConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TCPConnection::~TCPConnection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab49c7b4120490daec460c9b0bd06dfbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab49c7b4120490daec460c9b0bd06dfbd">&#9670;&nbsp;</a></span>asyncAccept()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::asyncAccept </td>
          <td>(</td>
          <td class="paramtype">boost::asio::ip::tcp::acceptor &amp;&#160;</td>
          <td class="paramname"><em>acceptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void(const boost::system::error_code &amp;err)&gt;&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_i_socket.html#af6b264198a1a9fb3dc5939c72149ff6b">ISocket</a>.</p>

</div>
</div>
<a id="a4984a896404d02c9dc1135e788a71a4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4984a896404d02c9dc1135e788a71a4d">&#9670;&nbsp;</a></span>asyncConnect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::asyncConnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="callback__typedefs_8hpp.html#a049e2c9f952140004e0e04abf3e95260">ConnectCallbackType</a>&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_i_socket.html#af6525ce8f03ad705e85400b9bf58a65b">ISocket</a>.</p>

</div>
</div>
<a id="a270208cc3dd85f0ce4be7ef720a8927a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a270208cc3dd85f0ce4be7ef720a8927a">&#9670;&nbsp;</a></span>asyncRead()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::asyncRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_marvin_1_1_m_buffer.html">Marvin::MBuffer</a> &amp;&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="callback__typedefs_8hpp.html#aefc3c66bca9018a8a24ae732074b8065">AsyncReadCallbackType</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>read </p>

<p>Implements <a class="el" href="class_i_read_socket.html#aade0e0486658895ba84314895d8a1584">IReadSocket</a>.</p>

</div>
</div>
<a id="a43f5822629686772725846837f935b88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43f5822629686772725846837f935b88">&#9670;&nbsp;</a></span>asyncWrite() <span class="overload">[1/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::asyncWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_marvin_1_1_m_buffer.html">Marvin::MBuffer</a> &amp;&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="callback__typedefs_8hpp.html#a4d959ed21cf4d737096ab4e25036b67b">AsyncWriteCallbackType</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>write </p>

<p>Implements <a class="el" href="class_i_write_socket.html#aaa6d8396dd721927a66224d6765c260a">IWriteSocket</a>.</p>

</div>
</div>
<a id="a39f657137386c99671e5b0bb660ac1ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39f657137386c99671e5b0bb660ac1ef">&#9670;&nbsp;</a></span>asyncWrite() <span class="overload">[2/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::asyncWrite </td>
          <td>(</td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="callback__typedefs_8hpp.html#a4d959ed21cf4d737096ab4e25036b67b">AsyncWriteCallbackType</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_i_write_socket.html#a473c4d37d76c7c81b2b4459ca3f9b1d5">IWriteSocket</a>.</p>

</div>
</div>
<a id="a80ea97827f3b75bbcdaf57a48c100fe4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80ea97827f3b75bbcdaf57a48c100fe4">&#9670;&nbsp;</a></span>asyncWrite() <span class="overload">[3/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::asyncWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___buffer.html#ga61df81a686ace7e9b683a9d7bda76865">Marvin::BufferChainSPtr</a>&#160;</td>
          <td class="paramname"><em>buf_chain_sptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___socket_i_o.html#ga38bc94591fd3214bc11f4d65300606a0">AsyncWriteCallback</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>this took a while to work out - change buffer code at your peril </p>

<p>Implements <a class="el" href="class_i_write_socket.html#a22114f462dfa9a059ffeb602197a9fe4">IWriteSocket</a>.</p>

</div>
</div>
<a id="a99e5f8c52d41a365cb8a99cdf7b2e96d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99e5f8c52d41a365cb8a99cdf7b2e96d">&#9670;&nbsp;</a></span>asyncWrite() <span class="overload">[4/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::asyncWrite </td>
          <td>(</td>
          <td class="paramtype">boost::asio::const_buffer&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___socket_i_o.html#ga38bc94591fd3214bc11f4d65300606a0">AsyncWriteCallback</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_i_write_socket.html#a8449d4f3a3a8a8648fffd6299438b744">IWriteSocket</a>.</p>

</div>
</div>
<a id="a2bd787d3f088dcea9d48b993fa043a1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bd787d3f088dcea9d48b993fa043a1c">&#9670;&nbsp;</a></span>asyncWrite() <span class="overload">[5/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::asyncWrite </td>
          <td>(</td>
          <td class="paramtype">boost::asio::streambuf &amp;&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___socket_i_o.html#ga38bc94591fd3214bc11f4d65300606a0">AsyncWriteCallback</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_i_write_socket.html#a61ae22600dd681c8acc618bd40affd72">IWriteSocket</a>.</p>

</div>
</div>
<a id="ab9d37f9ec45ee1c1bfb4164aed8b7135"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9d37f9ec45ee1c1bfb4164aed8b7135">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_i_socket.html#a3b518625f639bfef187fde5c84b790ce">ISocket</a>.</p>

</div>
</div>
<a id="ac0077ddd447c155402fa00348ec8635d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0077ddd447c155402fa00348ec8635d">&#9670;&nbsp;</a></span>fd_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::fd_free </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a22bdfdfecfdf97f4b8024e28e2ed6eb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22bdfdfecfdf97f4b8024e28e2ed6eb0">&#9670;&nbsp;</a></span>fd_inuse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::fd_inuse </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a76fd32d49d1875e8e4a0f9f503a92bcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76fd32d49d1875e8e4a0f9f503a92bcd">&#9670;&nbsp;</a></span>nativeSocketFD()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long TCPConnection::nativeSocketFD </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Utility getter functions® </p>

<p>Implements <a class="el" href="class_i_socket.html#a8da630b5350f1d3017dbdb2ebbf6f206">ISocket</a>.</p>

</div>
</div>
<a id="ac270233abe1610585bcaa86e654cf6ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac270233abe1610585bcaa86e654cf6ad">&#9670;&nbsp;</a></span>scheme()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string TCPConnection::scheme </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3dc68d736ab41b8550696f1bdedaf40a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dc68d736ab41b8550696f1bdedaf40a">&#9670;&nbsp;</a></span>server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string TCPConnection::server </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac8ed90aa1225fe1f534e736a438ac8bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8ed90aa1225fe1f534e736a438ac8bd">&#9670;&nbsp;</a></span>service()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string TCPConnection::service </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a55d72a606e2ec9be8e145606001c9790"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55d72a606e2ec9be8e145606001c9790">&#9670;&nbsp;</a></span>setConfig_connectTimeOut()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::setConfig_connectTimeOut </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>millisecs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="acbf6e8d1866906ce7b1a269c0df35f20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbf6e8d1866906ce7b1a269c0df35f20">&#9670;&nbsp;</a></span>setConfig_readTimeOut()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::setConfig_readTimeOut </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>millisecs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1a53971c6eeadf5dd1be0aa45b654694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a53971c6eeadf5dd1be0aa45b654694">&#9670;&nbsp;</a></span>setConfig_writeTimeOut()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::setConfig_writeTimeOut </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>millisecs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afdd912efe436e41d99a60ef1bb16ec73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdd912efe436e41d99a60ef1bb16ec73">&#9670;&nbsp;</a></span>shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TCPConnection::shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_i_socket.html#abf02c5351ea7c723b72e9c7248eefa61">ISocket</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a3608b7c239e5f41bff96c507731b122c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3608b7c239e5f41bff96c507731b122c">&#9670;&nbsp;</a></span>s_connect_timeout_interval_ms</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long TCPConnection::s_connect_timeout_interval_ms = 5000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>Configuration - static methods are provided for configuriing the time out values to be used by connections. The one set of config values apply to all connections. These should be set (if needed) at startup </dd></dl>

</div>
</div>
<a id="a97f9d02f6a64d900b89da6246930b402"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97f9d02f6a64d900b89da6246930b402">&#9670;&nbsp;</a></span>s_read_timeout_interval_ms</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long TCPConnection::s_read_timeout_interval_ms = 5000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="acdaad23edaa7a8075402761352169d92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdaad23edaa7a8075402761352169d92">&#9670;&nbsp;</a></span>s_write_timeout_interval_ms</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long TCPConnection::s_write_timeout_interval_ms = 5000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a257b53aea1460ce87ca0d5f269d1326f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a257b53aea1460ce87ca0d5f269d1326f">&#9670;&nbsp;</a></span>socket_fds_inuse</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; int, int &gt; TCPConnection::socket_fds_inuse</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>static properties and methods as test and monitor probes so that correct allocation/deallocation of file descriptors can be monitored </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>marvin/connection/<a class="el" href="tcp__connection_8hpp_source.html">tcp_connection.hpp</a></li>
<li>marvin/connection/<a class="el" href="tcp__connection_8cpp.html">tcp_connection.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
